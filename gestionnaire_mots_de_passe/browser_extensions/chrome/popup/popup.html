<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestionnaire de Mots de Passe</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="logo">
            <span class="icon">🔐</span>
            <span class="title">Gestionnaire MDP</span>
        </div>
        <div class="status" id="status">
            <span class="status-indicator" id="statusIndicator">⚫</span>
            <span class="status-text" id="statusText">Déconnecté</span>
        </div>
    </div>

    <!-- Contenu principal -->
    <div class="content">
        <!-- Écran de connexion -->
        <div class="screen" id="loginScreen">
            <div class="login-form">
                <h2>🔐 Authentification</h2>
                <p class="subtitle">Entrez votre mot de passe maître</p>
                
                <div class="input-group">
                    <input type="password" id="masterPassword" placeholder="Mot de passe maître" autocomplete="current-password">
                    <button type="button" id="togglePassword" class="toggle-btn" title="Afficher/Masquer">👁️</button>
                </div>
                
                <button id="loginBtn" class="btn btn-primary">
                    <span class="btn-text">Se connecter</span>
                    <span class="btn-loading" style="display: none;">⏳</span>
                </button>
                
                <div class="login-help">
                    <p>💡 Assurez-vous que l'application principale est démarrée</p>
                </div>
            </div>
        </div>

        <!-- Écran principal -->
        <div class="screen" id="mainScreen" style="display: none;">
            <!-- Actions rapides -->
            <div class="quick-actions">
                <button id="generateBtn" class="action-btn">
                    <span class="action-icon">⚡</span>
                    <span class="action-text">Générer</span>
                </button>
                
                <button id="fillBtn" class="action-btn">
                    <span class="action-icon">📝</span>
                    <span class="action-text">Remplir</span>
                </button>
                
                <button id="saveBtn" class="action-btn">
                    <span class="action-icon">💾</span>
                    <span class="action-text">Sauvegarder</span>
                </button>
            </div>

            <!-- Mots de passe pour le domaine actuel -->
            <div class="passwords-section">
                <div class="section-header">
                    <h3>🌐 <span id="currentDomain">Site actuel</span></h3>
                    <button id="refreshBtn" class="icon-btn" title="Actualiser">🔄</button>
                </div>
                
                <div id="passwordsList" class="passwords-list">
                    <div class="loading">⏳ Chargement...</div>
                </div>
            </div>

            <!-- Générateur de mot de passe -->
            <div class="generator-section">
                <div class="section-header">
                    <h3>⚡ Générateur</h3>
                    <button id="settingsBtn" class="icon-btn" title="Paramètres">⚙️</button>
                </div>
                
                <div class="generator-options" id="generatorOptions" style="display: none;">
                    <div class="option-group">
                        <label>Longueur: <span id="lengthValue">16</span></label>
                        <input type="range" id="lengthSlider" min="8" max="32" value="16">
                    </div>
                    
                    <div class="option-group">
                        <label><input type="checkbox" id="includeUpper" checked> Majuscules (A-Z)</label>
                        <label><input type="checkbox" id="includeLower" checked> Minuscules (a-z)</label>
                        <label><input type="checkbox" id="includeNumbers" checked> Chiffres (0-9)</label>
                        <label><input type="checkbox" id="includeSymbols" checked> Symboles (!@#$)</label>
                        <label><input type="checkbox" id="excludeAmbiguous" checked> Exclure ambigus (0O1l)</label>
                    </div>
                </div>
                
                <div class="generator-result">
                    <div class="password-display">
                        <input type="text" id="generatedPassword" readonly placeholder="Cliquez sur Générer">
                        <button id="copyBtn" class="icon-btn" title="Copier">📋</button>
                    </div>
                    
                    <div class="password-strength">
                        <div class="strength-bar">
                            <div class="strength-fill" id="strengthFill"></div>
                        </div>
                        <span class="strength-text" id="strengthText">Cliquez pour générer</span>
                    </div>
                </div>
            </div>

            <!-- Actions secondaires -->
            <div class="secondary-actions">
                <button id="openAppBtn" class="btn btn-secondary">
                    <span>🖥️ Ouvrir l'application</span>
                </button>
                
                <button id="logoutBtn" class="btn btn-danger">
                    <span>👋 Se déconnecter</span>
                </button>
            </div>
        </div>

        <!-- Messages -->
        <div id="message" class="message" style="display: none;"></div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <span class="version">v2.0.0</span>
        <span class="separator">•</span>
        <span class="project">Projet Cybersécurité 2</span>
    </div>

    <script src="popup.js"></script>
</body>
</html>